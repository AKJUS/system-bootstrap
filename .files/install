#!/usr/bin/env bash

set -e

CONFIG="install.conf.yaml"

# Add .apps/dotbot/bin to PATH if not already there, just in case
export PATH="$HOME/.apps/dotbot/bin:$PATH"

# Check if dotbot is in PATH
if ! command -v dotbot &> /dev/null; then
    echo "Error: dotbot is not installed or not in PATH."
    echo "Please run 'just install-binaries' or manually install dotbot."
    exit 1
fi

BASEDIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

cd "${BASEDIR}"

echo "Running dotbot..."
dotbot -d "${BASEDIR}" -c "${CONFIG}" "${@}"
